function YYParser(A,B){this._stack=[{state:0,token:{id:"$start",value:0}}];this._rules=B;this._status=A;this._source="";this._errors=[];this._errors.toString=function(){return this.join("\n")};this._lineno=0;this._charoff=0;this._reduce={}}YYParser.prototype.initialize=function(){};YYParser.prototype._Assert=function(A,C,B){if(!A){return this.Error(C,B)}return true};YYParser.prototype.ExpectList=function(){var B=this._stack[this._stack.length-1];var C=B.state;var A=this._status[C];var D=A.actions;if(D){return D}return{}};YYParser.prototype.ExpectFor=function(D){var B=this._stack[this._stack.length-1];var C=B.state;var A=this._status[C];var E=A.actions;return E&&(E[D]!=null)};YYParser.prototype._process=function(){var F=this;var E=null;if(this._source==""){return }while(1){var D=this._stack[this._stack.length-1];var G=D.state;if(G<0){throw new Error("state in stack must >= 0")}var A=this._status[G];E=this._lexer();var C=null;if(A.actions){C=A.actions[E.id]}if(C==null){C=A.Default}if(C==null){if(E.value.toString()==""){this.Error("reduce error: the code sequence is not accomplished.",false)}else{this.Error("reduce error: unexpected token '"+E.id+"'.")}E=null}if(C>0){if(E.value.toString()==""){break}this._stack.push({state:C,token:E});E=null}else{if(C<=0){this.RecoverInput();this._stack.push(B(-C))}}}function B(N){var Q=F._rules[N];if(N in F._reduce){F.Error("reduce error: a reduce-reduce recursion accured.",true)}F._reduce[N]=N;if(F._Assert(Q!=null,"reduce error: no rule matched.",false)){var K={};K.id=Q[0];var O=new Array(Q[1]);var H=Q[2];for(var M=0;M<O.length;M++){O[O.length-M-1]=F._stack.pop().token}if(H){K.value=H([F].concat(O))}else{if(O[M-1]){K.value=O[M-1].value}}var J=F._stack[F._stack.length-1];if(F._Assert(J!=null,"reduce error: null stack error.",true)){var I=J.state;var P=F._status[I].gotos;var L=P[K.id]||J.state;if(F._Assert(L!=null)){return{state:L,token:K}}}}}};YYParser.prototype.Parse=function(A){(A!=null)&&(this._source=A);this._lineno=1;this._charoff=0;this.Recovering();this.Errok();this._process();if(this._errors.length>0){throw new Error(this._errors)}else{this.Accept();return this._stack[this._stack.length-1].token.value}};YYParser.prototype.Lexer=function(){return null};YYParser.prototype.Accept=function(){if(this.onaccept){if(false===this.onAccept()){return false}}};YYParser.prototype.RecoverInput=function(){this._source=this._srcbak;this._lineno=this._linenobak;this._charoff=this._charoffbak};YYParser.prototype._lexer=function(){this._srcbak=this._source;this._linenobak=this._lineno;this._charoffbak=this._charoff;this._reduce={};var A=this._source.match(/^[\s\n\t]+/);var B;if(A){if(B=A[0].match(/\n/g)){this._lineno+=B.length;this._charoff=0}if(A=A[0].match(/\n[^\n]*$/)){this._charoff+=A[0].length-1}}this._source=this._source.replace(/^[\s\n\t]+/,"");A=this.Lexer();if(!A&&(A=this._source.match(/^./))){this._source=this._source.replace(/^./,"");this._charoff++;this._input=A={id:A[0],value:A[0]};return A}else{if(A){this._charoff+=A.value.toString().length;this._input=A;return A}}return{id:"",value:""}};YYParser.prototype.Error=function(D,C,A){if(this.onError){if(this.onError(D)===false){return false}}D=D||"unknown error.";A=A||"ERROR";if(C==null){C=true}var B={lineno:this._lineno,charoff:this._charoff,errmsg:D,expect:this.ExpectList(),input:this._input.value||"",check:A,toString:function(){return this.errmsg+"(row:"+this.lineno+",column:"+this.charoff+",near:'"+(this.input?this.input:"")+"')"}};this._errors.push(B);if(!C){throw new Error(this._errors)}this._reduce={};return false};YYParser.prototype.Errok=function(){this._errors.length=0};YYParser.prototype.Recovering=function(){this._stack=[{state:0,token:{id:"$start",value:0}}];this._reduce={}};YYParser.prototype.Abort=function(){this.Error("parsing abort.",false,"ABORT")};function XPath(){this.initialize()}XPath.prototype=new YYParser([{actions:{ParentPath:16,Global:4,"@":3,"~":6,"/":22,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},gotos:{Step:1,LocalPath:2,PathExpr:5,LocationPath:7,UnionExpr:9,NodeTest:8,AbsoluteLocationPath:10,AbbreviatedStep:11,START:13,AxisSpecifierNodeTest:15,AxisSpecifier:17,NameTest:18,GlobalPath:19,NodeName:21,AbbreviatedAbsoluteLocationPath:23,NormalStep:29,AbbreviatedRelativeLocationPath:28,FilterTest:26,RelativeLocationPath:27}},{Default:-10},{actions:{ParentPath:16,"@":3,"~":6,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},Default:-7,gotos:{Step:1,AxisSpecifier:17,NameTest:18,NodeName:21,NodeTest:8,AbbreviatedStep:11,RelativeLocationPath:31,AbbreviatedRelativeLocationPath:28,NormalStep:29,FilterTest:26,AxisSpecifierNodeTest:15}},{Default:-39},{Default:-14},{Default:-2},{actions:{QName:32}},{Default:-4},{Default:-27},{actions:{"|":33},Default:-1},{Default:-6},{Default:-17},{Default:-23},{actions:{"":34}},{actions:{":":35},Default:-25},{Default:-19},{Default:-22},{actions:{"*":12,"#":25,NodeType:20,QName:14,".":37},gotos:{FilterTest:26,NameTest:18,NodeName:21,NodeTest:36}},{actions:{"#":25,".":37},Default:-30,gotos:{FilterTest:38}},{actions:{ParentPath:16,"@":3,"~":6,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},gotos:{Step:1,AxisSpecifier:17,NameTest:18,NodeName:21,NodeTest:8,AbbreviatedStep:11,RelativeLocationPath:39,AbbreviatedRelativeLocationPath:28,NormalStep:29,FilterTest:26,AxisSpecifierNodeTest:15}},{actions:{"(":40}},{Default:-24},{Default:-13},{Default:-9},{actions:{AxisOperator:41}},{actions:{Literal1:42,Literal0:43,QName:44},gotos:{Literal:45}},{Default:-32},{actions:{Global:4,"/":22},Default:-5,gotos:{LocalPath:46,GlobalPath:47}},{Default:-12},{actions:{"[":48},Default:-18,gotos:{Predicate:49}},{actions:{Literal1:42,Literal0:43,QName:50},Default:-21,gotos:{Literal:51}},{actions:{Global:4,"/":22},Default:-8,gotos:{LocalPath:46,GlobalPath:47}},{Default:-28},{actions:{ParentPath:16,Global:4,"@":3,"~":6,"/":22,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},gotos:{Step:1,LocalPath:2,PathExpr:52,LocationPath:7,NodeTest:8,AbsoluteLocationPath:10,AbbreviatedStep:11,AxisSpecifierNodeTest:15,AxisSpecifier:17,NameTest:18,GlobalPath:19,NodeName:21,AbbreviatedAbsoluteLocationPath:23,RelativeLocationPath:27,FilterTest:26,NormalStep:29,AbbreviatedRelativeLocationPath:28}},{Default:0},{actions:{QName:53}},{Default:-29},{actions:{Literal1:42,Literal0:43,QName:50},gotos:{Literal:51}},{Default:-31},{actions:{Global:4,"/":22},Default:-15,gotos:{LocalPath:46,GlobalPath:47}},{actions:{")":54}},{Default:-38},{Default:-77},{Default:-76},{Default:-34},{Default:-35},{actions:{ParentPath:16,"@":3,"~":6,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},gotos:{Step:55,AxisSpecifier:17,NameTest:18,NodeName:21,NodeTest:8,AbbreviatedStep:11,NormalStep:29,FilterTest:26,AxisSpecifierNodeTest:15}},{actions:{ParentPath:16,"@":3,"~":6,NodeType:20,AxisName:24,"*":12,"#":25,QName:14,".":30},gotos:{Step:56,AxisSpecifier:17,NameTest:18,NodeName:21,NodeTest:8,AbbreviatedStep:11,NormalStep:29,FilterTest:26,AxisSpecifierNodeTest:15}},{actions:{"-":57,"@":3,Literal1:42,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:65,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-20},{Default:-36},{Default:-37},{Default:-3},{Default:-26},{Default:-33},{Default:-11},{Default:-16},{actions:{"-":57,"@":3,Literal1:42,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:75,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"(":76}},{actions:{Regr:77}},{Default:-53},{actions:{QName:79},gotos:{FunctionName:78}},{actions:{"-":57,"@":3,Literal1:42,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:80,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-56},{actions:{QName:81}},{actions:{ne:83,"-":82,div:84,"<":85,RegOperator:87,"+":86,"=":92,nl:91,ng:93,"*":88,or:89,and:94,"]":90,">":96,mod:95}},{actions:{":":35,"(":-44},Default:-25},{Default:-57},{Default:-45},{Default:-55},{actions:{AxisOperator:97}},{Default:-54},{Default:-58},{actions:{"-":57,"@":3,Literal1:42,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:98,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-78},{Default:-73},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,")":101,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{Literal:71,AxisSpecifier:17,FunctionName:58,ArgumentList:100,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,Argument:102,FilterTest:26,Expr:99,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-79},{actions:{"(":103}},{actions:{AxisOperator:104},Default:-44},{Default:-74},{Default:-51},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:105,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:106,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:107,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:108,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:109,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{Reg:74,Regs:59},gotos:{RegExpr:110}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:111,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:112,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-52},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:113,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:114,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:115,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:116,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:117,AxisSpecifierNodeTest:67,VariableReference:69}},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,FilterTest:26,Expr:118,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-46},{actions:{ne:83,"-":82,div:84,"<":85,RegOperator:87,"+":86,"=":92,nl:91,ng:93,"*":88,or:89,")":119,and:94,mod:95,">":96}},{actions:{ne:83,"-":82,div:84,"<":85,RegOperator:87,"+":86,"*":88,or:89,nl:91,"=":92,ng:93,and:94,">":96,mod:95},Default:-50},{actions:{",":120,")":121}},{Default:-40},{Default:-48},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,")":123,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,ArgumentList:122,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,Argument:102,FilterTest:26,Expr:99,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-47},{actions:{div:84,RegOperator:87,"*":88,mod:95},Default:-69},{actions:{"-":82,div:84,"<":85,RegOperator:87,"+":86,"*":88,nl:91,ng:93,">":96,mod:95},Default:-63},{actions:{RegOperator:87},Default:-71},{actions:{"-":82,div:84,RegOperator:87,"+":86,"*":88,mod:95},Default:-65},{actions:{div:84,RegOperator:87,"*":88,mod:95},Default:-68},{Default:-59},{actions:{RegOperator:87},Default:-70},{actions:{ne:83,"-":82,div:84,"<":85,RegOperator:87,"+":86,"*":88,nl:91,"=":92,ng:93,">":96,mod:95},Default:-61},{actions:{"-":82,div:84,RegOperator:87,"+":86,"*":88,mod:95},Default:-66},{actions:{"-":82,div:84,"<":85,RegOperator:87,"+":86,"*":88,nl:91,ng:93,">":96,mod:95},Default:-62},{actions:{"-":82,div:84,RegOperator:87,"+":86,"*":88,mod:95},Default:-67},{actions:{ne:83,"-":82,div:84,"<":85,RegOperator:87,"+":86,"*":88,nl:91,"=":92,ng:93,">":96,mod:95},Default:-60},{actions:{RegOperator:87},Default:-72},{actions:{"-":82,div:84,RegOperator:87,"+":86,"*":88,mod:95},Default:-64},{Default:-75},{actions:{"-":57,Literal1:42,"@":3,"~":6,Literal0:43,Regs:59,Number:60,"!":62,"*":12,"$":64,QName:66,AxisOperator:68,RootScope:70,NodeType:20,"(":73,AxisName:24,"#":25,Reg:74,".":37},gotos:{AxisSpecifier:17,Literal:71,FunctionName:58,NameTest:18,NodeName:21,RegExpr:72,NodeTest:8,Scope:61,FunctionCall:63,Argument:124,FilterTest:26,Expr:99,AxisSpecifierNodeTest:67,VariableReference:69}},{Default:-41},{actions:{",":120,")":125}},{Default:-42},{Default:-49},{Default:-43}],[["$start",2,undefined],["START",1,function(A){A[0].domains.length=0;return A[1].value}],["UnionExpr",1,function(A){return A[0].domains.slice(0)}],["UnionExpr",3,function(A){return A[0].domains.slice(0)}],["PathExpr",1,function(A){A[0].init();return A[0].domains=Array.union(A[0].domain.domain,A[0].domains)}],["LocationPath",1,undefined],["LocationPath",1,undefined],["AbsoluteLocationPath",1,function(A){A[0].domain=new XPathDomain([document.documentElement])}],["AbsoluteLocationPath",2,undefined],["AbsoluteLocationPath",1,undefined],["RelativeLocationPath",1,function(A){A[0].step++}],["RelativeLocationPath",3,undefined],["RelativeLocationPath",1,undefined],["LocalPath",1,function(A){A[0].domainType="local"}],["GlobalPath",1,function(A){A[0].domainType="global"}],["AbbreviatedAbsoluteLocationPath",2,undefined],["AbbreviatedRelativeLocationPath",3,undefined],["Step",1,undefined],["Step",1,function(A){}],["NormalStep",1,function(F){var I=F[0].domainType;var B=[];if(!F[0].step&&I!="auto"){F[0].domain=new XPathDomain([document.documentElement])}var G=F[0].domain;var E=F[1].value.split("::");var D=E[0];var A=E[1];var C=E[2];var J=E[3];try{B=G.axis(D,A.toLowerCase(),C,J)}catch(H){F[0].Error(aixs+" not support yet")}F[0].domain=new XPathDomain(B)}],["NormalStep",2,function(A){}],["AbbreviatedStep",1,function(A){}],["AbbreviatedStep",1,function(B){var A=B[0].domain;B[0].domain=new XPathDomain(A.axis("parent","*","basical"))}],["NameTest",1,function(A){return A[1].value}],["NameTest",1,function(A){return A[1].value}],["NodeName",1,function(A){return A[1].value}],["NodeName",3,function(A){return A[1].value+A[2].value+A[3].value}],["AxisSpecifierNodeTest",1,function(C){var B=C[0].domainType;var A=B=="global"?"descendant":"child";return A+"::"+C[1].value}],["AxisSpecifierNodeTest",2,function(A){return A[2].value+"::*::basical"}],["AxisSpecifierNodeTest",2,function(A){return A[1].value+A[2].value}],["NodeTest",1,function(A){return A[1].value+"::basical"}],["NodeTest",2,function(A){return A[1].value+"::"+A[2].value}],["NodeTest",1,function(A){return"*::"+A[1].value}],["NodeTest",3,function(A){return"*::"+A[1].value}],["FilterTest",2,function(A){return"id::"+A[2].value}],["FilterTest",2,function($_){return"id::"+eval($_[2].value)}],["FilterTest",2,function(A){return"class::"+A[2].value}],["FilterTest",2,function($_){return"class::"+eval($_[2].value)}],["AxisSpecifier",2,function(A){return A[1].value+A[2].value}],["AxisSpecifier",1,function(A){return"attribute::"}],["FunctionCall",3,function(B){try{return B[0].XPathFunc[B[1].value].apply(B[0])}catch(A){B[0].Error("'"+B[1].value+"'未定义或不是合法的函数，使用[XPathObj].defun()定义或使用[Scope]标识。")}}],["FunctionCall",4,function(B){try{return B[0].XPathFunc[B[1].value].apply(B[0],B[3].value)}catch(A){B[0].Error("'"+B[1].value+"'未定义或不是合法的函数，使用[XPathObj].defun()定义或使用[Scope]标识。")}}],["FunctionCall",4,function(F){try{var E=F[1].value.split("::");var C=window;for(var B=1;B<E.length-1;B++){C=C[E[B]]}var D=C[F[2].value];return D()}catch(A){F[0].Error("'"+F[1].value+F[2].value+"'未定义或不是合法的函数。")}}],["FunctionCall",5,function(F){try{var E=F[1].value.split("::");var C=window;for(var B=1;B<E.length-1;B++){C=C[E[B]]}var D=C[F[2].value];if(D.apply){return D.apply(C,F[4].value)}else{return D(F[4].value)}}catch(A){F[0].Error("'"+F[1].value+F[2].value+"'未定义或不是合法的函数。")}}],["FunctionName",1,undefined],["Scope",1,function(A){return A[1].value}],["Scope",2,function(A){return A[1].value+A[2].value}],["Scope",3,function(A){return A[1].value+A[2].value+A[3].value}],["ArgumentList",1,function(A){return[A[1].value]}],["ArgumentList",3,function(A){return A[1].value.concat(A[3].value)}],["Argument",1,function(B){var A=B[1].value;if(A instanceof XPathDomainFilterRule){A=A.filterDomain(B[0].domain)}return A}],["VariableReference",2,function(B){var A=B[0].variables[B[2].value];if(typeof A=="undefined"){B[0].Error("引用了未赋值的变量'$"+B[2].value+"'")}return A}],["Predicate",3,function(C){var B=C[2].value;if(B instanceof XPathDomain){C[0].domain=B}else{if(B instanceof XPathDomainFilterRule){C[0].domain=B.filterDomain(C[0].domain)}else{if(typeof B=="number"){var A=new XPathDomainFilterRule("position","*");C[0].domain=A.filterDomain(C[0].domain,function(D){return D==B})}else{var A=new XPathDomainFilterRule("self","*");C[0].domain=A.filterDomain(C[0].domain,function(){return !!(B)})}}}return !!(B)}],["Expr",1,function(A){return A[1].value}],["Expr",1,function(A){return A[1].value.slice(1,-1)}],["Expr",1,function(A){return A[1].value}],["Expr",1,function(A){return A[1].value}],["Expr",1,function(D){var A=D[1].value.split("::");var C=A[0];var B=A[1];if(C=="child"){C="self"}return new XPathDomainFilterRule(C,B)}],["Expr",1,function(G){var F=G[1].value.exp;var E=G[1].value.rep;var B=G[1].value.mod;var D=G[0].domain;var C=new XPathDomainFilterRule("self","*");var A=C.filterDomain(G[0].domain,function(H){F.lastIndex=0;return B=="m"?F.test(H):H.toString().replace(F,E)});return A}],["Expr",3,function(D){var C=D[1].value;var B=D[3].value;if(C instanceof XPathDomainFilterRule){var A=C.filterDomain(D[0].domain,function(E){B.lastIndex=0;return B.mod=="m"?B.exp.test(E):E.toString().replace(B.exp,B.rep)});return A}if(B.mod=="m"){C.lastIndex=0;return B.exp.test(C.toString())}if(B.mod=="s"){C.lastIndex=0;return C.toString().replace(B.exp,B.rep)}}],["Expr",3,function(C){var B=C[1].value;var A=C[3].value;if(B instanceof XPathDomainFilterRule){B=B.filterDomain(C[0].domain)}if(A instanceof XPathDomainFilterRule){A=A.filterDomain(C[0].domain)}if(B instanceof XPathDomain&&A instanceof XPathDomain){return new XPathDomain(Array.intersect(A.domain,B.domain))}return B&&A}],["Expr",3,function(C){var B=C[1].value;var A=C[3].value;if(B instanceof XPathDomainFilterRule){B=B.filterDomain(C[0].domain)}if(A instanceof XPathDomainFilterRule){A=A.filterDomain(C[0].domain)}if(B instanceof XPathDomain&&A instanceof XPathDomain){return new XPathDomain(Array.union(A.domain,B.domain))}return B||A}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E==D[3].value});return C}return D[1].value==D[3].value}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E!=D[3].value});return C}return D[1].value!=D[3].value}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E>D[3].value});return C}return D[1].value>D[3].value}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E<D[3].value});return C}return D[1].value<D[3].value}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E>=D[3].value});return C}return D[1].value>=D[3].value}],["Expr",3,function(D){var B=D[1].value,A=D[3].value;if(!(B instanceof XPathDomainFilterRule)&&(A instanceof XPathDomainFilterRule)){B=D[3].value,A=D[1].value}if(B instanceof XPathDomainFilterRule){var C=B.filterDomain(D[0].domain,function(E){return E<=D[3].value});return C}return D[1].value<=D[3].value}],["Expr",3,function(A){return A[1].value+A[3].value}],["Expr",3,function(A){return A[1].value-A[3].value}],["Expr",3,function(A){return A[1].value*A[3].value}],["Expr",3,function(A){return A[1].value/A[3].value}],["Expr",3,function(A){return A[1].value%A[3].value}],["Expr",2,function(A){return -A[2].value}],["Expr",2,function(A){return !A[2].value}],["Expr",3,function(B){var A=B[2].value;if(A instanceof XPathDomainFilterRule){A=A.filterDomain(B[0].domain)}return A}],["Literal",1,undefined],["Literal",1,undefined],["RegExpr",1,function(A){return new XPathRegExp(A[1].value)}],["RegExpr",2,function(A){return new XPathRegExp(A[1].value,A[2].value)}]]);XPath.prototype.Lexer=function(){var A;if(this.ExpectFor("AxisName")){if(A=this._source.match(/^(ancestor-or-self|descendant-or-self|ancestor|attribute|child|descendant|following-sibling|following|namespace|parent|preceding-sibling|preceding|self)(?=\:\:)/g)){this._source=this._source.replace(/^(ancestor-or-self|descendant-or-self|ancestor|attribute|child|descendant|following-sibling|following|namespace|parent|preceding-sibling|preceding|self)(?=\:\:)/g,"");return{id:"AxisName",value:A[0]}}}if(this.ExpectFor("NodeType")){if(A=this._source.match(/^(comment|text|processing-instruction|node)(?=\(\))/g)){this._source=this._source.replace(/^(comment|text|processing-instruction|node)(?=\(\))/g,"");return{id:"NodeType",value:A[0]}}}if(A=this._source.match(/^([0-9]+(?:\.[0-9]+)?)/g)){A[0]=parseFloat(A[0]);this._source=this._source.replace(/^([0-9]+(?:\.[0-9]+)?)/g,"");return{id:"Number",value:A[0]}}if(A=this._source.match(/^\"([^\"\\]|(\\.))*\"/g)){this._source=this._source.replace(/^\"([^\"\\]|(\\.))*\"/g,"");return{id:"Literal0",value:A[0]}}if(A=this._source.match(/^\'([^\'\\]|(\\.))*\'/g)){this._source=this._source.replace(/^\'([^\'\\]|(\\.))*\'/g,"");return{id:"Literal1",value:A[0]}}if(this.ExpectFor("Reg")){if(A=this._source.match(/^m?\/([^\/\\]|(\\.))*\/[img]*/g)){this._source=this._source.replace(/^m?\/([^\/\\]|(\\.))*\/[img]*/g,"");return{id:"Reg",value:A[0]}}}if(this.ExpectFor("Regs")){if(A=this._source.match(/^s\/([^\/\\]|(\\.))*\//g)){this._source=this._source.replace(/^s\/([^\/\\]|(\\.))*\//g,"");return{id:"Regs",value:A[0]}}}if(this.ExpectFor("Regr")){if(A=this._source.match(/^([^\/\\]|(\\.))*\/[img]*/g)){this._source=this._source.replace(/^([^\/\\]|(\\.))*\/[img]*/g,"");return{id:"Regr",value:A[0]}}}if(A=this._source.match(/^=~/g)){this._source=this._source.replace(/^=~/g,"");return{id:"RegOperator",value:A[0]}}if(A=this._source.match(/^\:\:/g)){this._source=this._source.replace(/^\:\:/g,"");return{id:"AxisOperator",value:A[0]}}if(A=this._source.match(/^\/\//g)){this._source=this._source.replace(/^\/\//g,"");return{id:"Global",value:A[0]}}if(A=this._source.match(/^\.\./g)){this._source=this._source.replace(/^\.\./g,"");return{id:"ParentPath",value:A[0]}}if(A=this._source.match(/^\>\=/g)){this._source=this._source.replace(/^\>\=/g,"");return{id:"nl",value:A[0]}}if(A=this._source.match(/^\<\=/g)){this._source=this._source.replace(/^\<\=/g,"");return{id:"ng",value:A[0]}}if(A=this._source.match(/^\!\=/g)){this._source=this._source.replace(/^\!\=/g,"");return{id:"ne",value:A[0]}}if(this.ExpectFor("and")){if(A=this._source.match(/^and(?![\w])/g)){this._source=this._source.replace(/^and(?![\w])/g,"");return{id:"and",value:A[0]}}}if(this.ExpectFor("or")){if(A=this._source.match(/^or(?![\w])/g)){this._source=this._source.replace(/^or(?![\w])/g,"");return{id:"or",value:A[0]}}}if(this.ExpectFor("div")){if(A=this._source.match(/^div(?![\w])/g)){this._source=this._source.replace(/^div(?![\w])/g,"");return{id:"div",value:A[0]}}}if(this.ExpectFor("mod")){if(A=this._source.match(/^mod(?![\w])/g)){this._source=this._source.replace(/^mod(?![\w])/g,"");return{id:"mod",value:A[0]}}}if(A=this._source.match(/^[A-Za-z_][A-Za-z0-9_]*/g)){this._source=this._source.replace(/^[A-Za-z_][A-Za-z0-9_]*/g,"");return{id:"QName",value:A[0]}}};if(!Array.union){Array.union=function(B,A){var D=A.slice(0);for(var E=0;E<B.length;E++){var F=false;for(var C=0;C<A.length;C++){if(B[E]===A[C]){F=true;break}}if(!F){D.push(B[E])}}return D}}if(!Array.intersect){Array.intersect=function(B,A){var D=[];for(var E=0;E<B.length;E++){for(var C=0;C<A.length;C++){if(B[E]===B[C]){D.push(B[E])}}}return D}}XPath.prototype.initialize=function(){this.domainType="auto";this.step=0;XPath.prototype.variables={}};XPath.prototype.XPathFunc={id:function(A){A=A||"*";return new XPathDomainFilterRule("id",A,function(B){return B&&new RegExp("(^|\\s)"+B+"(?=\\s|$)","g").test(A)||A=="*"})},position:function(){return new XPathDomainFilterRule("position","*")},last:function(){return this.domain.domain.length},count:function(A){A=A||this.domain;if(A instanceof XPathDomainFilterRule){A=A.filterDomain(this.domain)}if(A instanceof XPathDomain){return A.domain.length}this.Error("参数类型必须是XPathDomain!",false)},string:function(A){return A.toString()},concat:function(){var A=[];for(var B=0;B<arguments.length;B++){A.push(arguments[B])}return A.join("")},substring:function(B,C,A){return B.substring(C-1,A)},strlen:function(A){return A.length},"boolean":function(A){return !!A},not:function(A){return !A},"true":function(){return true},"false":function(){return false},number:function(A){return Number(A)},floor:function(A){return Math.floor(A)},ceiling:function(A){return Math.ceil(A)},round:function(A){return Math.round(A)},array:function(){var A=[];for(var B=0;B<arguments.length;B++){A.push(arguments[B])}return A}};XPath.prototype.init=function(){this.domainType="auto";this.step=0};XPath.prototype.assign=function(A,B){return this.variables[A]=B};XPath.prototype.defun=function(A,B){return this.XPathFunc[A]=B};XPath.prototype.domain=new XPathDomain([document.documentElement]);XPath.prototype.domains=[];XPath.prototype.onError=function(){this.init()};function XPathDomain(A){this.domain=A}XPathDomain.prototype.filters={id:function(A,B,C){return B.id==C},"class":function(B,C,A){return C.className==A},basical:function(A,B){if(A=="self"){return this.node(A,B)}else{return this.element(A,B)}},element:function(A,B){return B.nodeType==1},node:function(A,B){return true},text:function(A,B){return B.nodeType==3},comment:function(A,B){return B.nodeType==8},"processing-instruction":function(A,B){return B.nodeType==7}};XPathDomain.prototype.axis=function(D,B,C,A){return this.tests[D].call(this,D,B,C,A)};XPathDomain.prototype.tests={child:function(D,I,A,J){var F=this.domain;var H=[];for(var G=0;G<F.length;G++){var C=F[G].childNodes;for(var E=0;C&&E<C.length;E++){var B=C[E];if(B&&(I=="*"||B.nodeName&&B.nodeName.toLowerCase()==I)){if(this.filters[A](D,B,J)){H.push(B)}}}}return H},descendant:function(D,M,B,N){var H=this.domain;var K=[];var I=[];for(var J=0;J<H.length;J++){var A=H[J].getElementsByTagName(M);if(B!="element"&&B!="basical"){for(var F=0;F<A.length;F++){var L=A[F].childNodes;for(var E=0;E<L.length;E++){if(L[E].nodeType!=1){I.push(L[E])}}}}for(var G=0;G<A.length;G++){var C=A[G];if(M=="*"||C.nodeName&&C.nodeName.toLowerCase()==M){if(this.filters[B](D,C,N)){K.push(C)}}}for(var G=0;G<I.length;G++){var C=I[G];if(M=="*"||C.nodeName&&C.nodeName.toLowerCase()==M){if(this.filters[B](D,C,N)){K.push(C)}}}}return K},self:function(F,H,E,A){var G=this.domain;var C=[];for(var D=0;D<G.length;D++){var B=G[D];if(B&&(B.nodeName&&(B.nodeName.toLowerCase()==H||H=="*"))){if(this.filters[E](F,B,A)){C.push(B)}}}return C},attribute:function(G,D,F,A){var H=this.domain;var C=[];for(var E=0;E<H.length;E++){var B=H[E];if(B&&B.getAttribute&&(D=="*"||B.getAttribute(D)!=null)){if(this.filters[F](G,B,A)){C.push(B)}}}return C},parent:function(B,H,A,J){var D=this.domain;var G=[];for(var E=0;E<D.length;E++){var I=D[E].parentNode;if(I&&(H=="*"||I.nodeName&&(I.nodeName.toLowerCase()==H))){var F=false;if(this.filters[A](B,I,J)){for(var C=0;C<G.length;C++){if(G[C]==I){F=true;break}}if(!F){G.push(I)}}}}return G},ancestor:function(B,J,A,M){var E=this.domain;var I=[];function L(O){var N=[];while(O){N.push(O);O=O.parentNode}return N}for(var F=0;F<E.length;F++){var G=L(E[F]);for(var C=0;C<G.length;C++){var K=G[C];if(K&&(J=="*"||K.nodeName&&(K.nodeName.toLowerCase()==J))){var H=false;if(this.filters[A](B,K,M)){for(var D=0;D<I.length;D++){if(I[D]==K){H=true}}if(!H){I.push(K)}}}}}return I},"descendant-or-self":function(C,D,B,A){return Array.union(this.axis("slef",D,B,A),this.axis("descendant",D,B,A))},"ancestor-or-self":function(A){return Array.union(this.axis("slef",A,filter,arg),this.axis("ancestor",A,filter,arg))}};function XPathDomainFilterRule(C,B,A){this.axis=C;this.name=B;this.cloak=A}XPathDomainFilterRule.prototype.filterDomain=function(C,A){try{A=A||this.cloak||function(){return true};return this.filters[this.axis].call(this,C,A)}catch(B){alert(B.message);throw new Error(this.axis+" not support yet!")}};XPathDomainFilterRule.prototype.filters={self:function(F,B){var A=F.domain;var E=[];for(var D=0;D<A.length;D++){var C=A[D];var G=C.nodeName&&C.nodeName.toLowerCase();if((this.name=="*"||G==this.name)&&B(G||"")){E.push(A[D])}}return new XPathDomain(E)},attribute:function(G,C){var B=G.domain;var F=[];for(var E=0;E<B.length;E++){var D=B[E];var A=D.getAttribute&&D.getAttribute(this.name);if(C(A||"")){F.push(B[E])}}return new XPathDomain(F)},id:function(F,B){var A=F.domain;var E=[];for(var D=0;D<A.length;D++){var C=A[D];var G=C.id||"";if(B(G)){E.push(A[D])}}return new XPathDomain(E)},position:function(E,B){var A=E.domain;var D=[];for(var C=0;C<A.length;C++){if(B(C+1)){D.push(A[C])}}return new XPathDomain(D)}};function XPathRegExp(exp,rep){this.mod="m";var tok;if(/^[^\/]/.test(exp)){this.mod=exp.charAt(0);exp=exp.slice(1)}if(rep){if(tok=/[^\/]$/.exec(rep)){exp+=rep.slice(-tok.length);this.rep=rep.slice(0,-tok.length-1)}else{this.rep=rep.slice(0,-1)}}this.exp=eval(exp)}function __export__(){var A=new XPath();function C(F){var E=A.domain;var D=A.Parse(F);A.domain=E;return D}function B(D){return A.Parse(D)}return{parse:B,test:C}};